<!-- {{consentService.url()}} -->
<br />

<div *ngIf="bundle">
    <!-- <pre>
    <code class="language-json">
        {{formatBundle()}}    
    </code>
    </pre> -->
    <table class="table table-striped table-condensed">
        <thead>
            <tr>
                <th>Consent ID</th>
                <th>Subject</th>
                <th>Status</th>
                <th>Effective Period</th>
                <th>Type</th>
                <th>Controller Parties</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let c of bundle.entry">
                <td><a [routerLink]="['/builder', c.resource!.id]">
                        {{c.resource?.id}}</a></td>
                <td>
                    <div *ngIf="c.resource?.subject?.reference">
                        <b>
                            <span  *ngIf="patientSummaries[c.resource!.subject!.reference!]" [innerText]="nameFor(patientSummaries[c.resource!.subject!.reference!])"></span>
                        </b>
                        - 
                        {{c.resource!.subject!.reference}}
                    </div>
                </td>
                <td>{{c.resource?.status}}</td>
                <!-- <td>
                    <p *ngFor="let cc of c.resource?.category">
                        <span *ngFor="let coding of cc.coding">
                            {{coding.code}}
                            ({{coding.system}})
                        </span>
                    </p>
                </td> -->
                <td>
                    <p *ngIf="c.resource?.period">
                        {{c.resource?.period?.start}} -
                        {{c.resource?.period?.end}}
                    </p>
                </td>
                <td>{{c.resource?.decision}}</td>
                <td>
                    <p *ngFor="let g of c.resource?.controller">
                        <b>
                            <span  *ngIf="g.reference && organizationSummaries[g.reference]" [innerText]="organizationSummaries[g.reference].name"></span>
                        </b>
                        - 
                        {{g.reference}}
                    </p>
                </td>
                <!-- <td>{{c.resource?.provision}}</td> -->

                <td><button *ngIf="c.resource" class="btn btn-danger" role="button" (click)="delete(c.resource)"><span
                            class="bi bi-trash"> </span></button></td>
            </tr>
        </tbody>
    </table>
</div>